# ============================================================================
# Default Configuration for Pairs Trading Backtest
# 100% aligned with Vidyamurthy "Pairs Trading" Ch.5-8
# All parameters include page-specific citations
# ============================================================================

experiment_name: default_vidyamurthy
description: "Pairs trading config with exact Vidyamurthy Ch.5-8 citations"

# ============================================================================
# CH.5: OVERVIEW - Formation Window [Vidyamurthy:Ch.5:p74]
# ============================================================================
# Note: Vidyamurthy does NOT specify exact duration
# Standard practice: 1 trading year = 252 days
formation_days: 252            # ~1 trading year
trading_days: 252              # ~1 trading year OOS test

# ============================================================================
# CH.6: PAIRS SELECTION [Vidyamurthy:Ch.5:p75-80, Ch.6:p90-97]
# ============================================================================
# Cointegration test: ADF on spread residuals
# [Engle:Granger:1987] standard: 1% significance
pvalue_threshold: 0.01         # 99% confidence

# [Vidyamurthy:Ch.5:p75, Ch.6:p93] "log(pA) - γ*log(pB) = μ + εt"
use_log_prices: true           # REQUIRED per Ch.5

# CH.7: Half-Life Bounds [NOT explicitly specified by Vidyamurthy]
# User preference based on trading horizon (no citation)
min_half_life: 5.0             # User preference
max_half_life: 30.0            # User preference

# [Vidyamurthy:Ch.6:p90-97] Distance measure based on factor correlation
# Note: Exact bounds NOT specified in book - standard practice
min_correlation: 0.75
max_correlation: 0.95

# Rolling Consistency (disabled - walk-forward handles validation)
rolling_consistency: false
n_rolling_windows: 4
min_passing_windows: 2

# Pair Selection
top_pairs: 20
max_pairs_per_sector: 5
max_pairs_per_etf: 2
min_spread_range_pct: 0.02

# [Vidyamurthy:Ch.6:p87] "Common Trends Cointegration Model"
# Same-sector pairs more likely to share common trends
sector_focus: true
exclude_sectors:
  - BONDS_GOV                  # Different dynamics (fixed income)
  - BONDS_CORP                 # Credit risk, not equity
  - COMMODITIES                # Physical supply/demand
  - EMERGING                   # Different risk profiles

# ============================================================================
# CH.8: TRADING DESIGN [Vidyamurthy:Ch.8:p119-135]
# ============================================================================
# [Vidyamurthy:Ch.8:p119-120] "Band Design for White Noise"
# Optimal Δ* ≈ 0.75σ maximizes f(Δ) = Δ × [1 - N(Δ)] × 2T
# CRITICAL: Traditional 2.0σ is STATISTICALLY driven, NOT economically optimal
entry_threshold_sigma: 0.75    # Ch.8 p119-120: Profit-maximizing threshold
exit_threshold_sigma: 0.0      # Exit at mean (equilibrium)
exit_tolerance_sigma: 0.1      # Allow ±0.1σ band around mean
stop_loss_sigma: 4.0           # Backup stop (user preference)

# ============================================================================
# CH.7: TESTING FOR TRADABILITY [Vidyamurthy:Ch.7:p112-116]
# ============================================================================
# [Vidyamurthy:Ch.7:p114-115] Bootstrap procedure for holding period
use_bootstrap_holding_period: true
bootstrap_n_samples: 1000

# [Vidyamurthy:Ch.7:p112-116] Adaptive normalization window
use_adaptive_lookback: true
adaptive_lookback_multiplier: 4.0
adaptive_lookback_min: 20
adaptive_lookback_max: 120

# [Vidyamurthy:Ch.8:p130-135] Regularization principle
# Fix exit parameters at formation window estimate
use_fixed_exit_params: true

# ============================================================================
# CH.8: STOP LOSS & HOLDING [Vidyamurthy:Ch.8:p122-130]
# ============================================================================
# Time-based stops preferred for mean-reverting spreads
time_based_stops: true         # Ch.8: RECOMMENDED
stop_tightening_rate: 0.15     # Tighten 15% per HL elapsed
max_holding_days: 60           # ~3× typical half-life
dynamic_max_holding: true
max_holding_multiplier: 3.0

# ============================================================================
# CH.5: PORTFOLIO & CAPITAL [Vidyamurthy:Ch.5:p82-83]
# ============================================================================
# "pairs trading may have 10-15 active positions"
max_positions: 10
compounding: true              # Dynamic allocation
leverage: 1.0                  # No leverage
dynamic_hedge: true
hedge_update_days: 63          # Quarterly

# [Vidyamurthy:Ch.8:p119-120] Transaction costs
transaction_cost_bps: 5.0      # ETFs: ~2-3 bps per leg

# Blacklist
blacklist_stoploss_rate: 0.30
blacklist_min_trades: 3

# Output
output_dir: results
save_trades: true
save_summary: true
save_config_snapshot: true
timestamped_output: true

# Data Paths
price_data_path: data/raw/etf_prices_fresh.csv
etf_metadata_path: configs/etf_metadata.yaml
